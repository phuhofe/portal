{"version":3,"file":"angular-pintura.js","sources":["../../../src/angular-pintura/v9/projects/angular-pintura/src/lib/pintura-editor-abstract.component.ts","../../../src/angular-pintura/v9/projects/angular-pintura/src/lib/pintura-editor.component.ts","../../../src/angular-pintura/v9/projects/angular-pintura/src/lib/pintura-editor-modal.component.ts","../../../src/angular-pintura/v9/projects/angular-pintura/src/lib/pintura-editor-overlay.component.ts","../../../src/angular-pintura/v9/projects/angular-pintura/src/lib/angular-pintura.module.ts","../../../../src/angular-pintura/v9/projects/angular-pintura/src/public-api.ts","../../../../src/angular-pintura/v9/projects/angular-pintura/src/angular-pintura.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter, ElementRef, NgZone, OnInit } from '@angular/core';\n\n// @ts-ignore\nimport { ImageSource, PinturaEditorOptions, PinturaEditor, dispatchEditorEvents } from 'pintura';\n\n@Component({\n    selector: 'pintura-editor',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class PinturaEditorAbstractComponent implements OnInit {\n    protected element: ElementRef;\n    protected editor: PinturaEditor;\n    protected zone: NgZone;\n    private unsubs: Function[] = [];\n\n    @Input() src: ImageSource = undefined;\n    @Input() options: PinturaEditorOptions = undefined;\n\n    @Output() loadstart: EventEmitter<any> = new EventEmitter();\n    @Output() loaderror: EventEmitter<any> = new EventEmitter();\n    @Output() loadprogress: EventEmitter<any> = new EventEmitter();\n    @Output() load: EventEmitter<any> = new EventEmitter();\n    @Output() processstart: EventEmitter<any> = new EventEmitter();\n    @Output() processerror: EventEmitter<any> = new EventEmitter();\n    @Output() processprogress: EventEmitter<any> = new EventEmitter();\n    @Output() process: EventEmitter<any> = new EventEmitter();\n    @Output() update: EventEmitter<any> = new EventEmitter();\n    @Output() undo: EventEmitter<any> = new EventEmitter();\n    @Output() redo: EventEmitter<any> = new EventEmitter();\n    @Output() revert: EventEmitter<any> = new EventEmitter();\n    @Output() destroy: EventEmitter<any> = new EventEmitter();\n    @Output() show: EventEmitter<any> = new EventEmitter();\n    @Output() hide: EventEmitter<any> = new EventEmitter();\n    @Output() close: EventEmitter<any> = new EventEmitter();\n    @Output() addshape: EventEmitter<any> = new EventEmitter();\n    @Output() selectshape: EventEmitter<any> = new EventEmitter();\n    @Output() updateshape: EventEmitter<any> = new EventEmitter();\n    @Output() removeshape: EventEmitter<any> = new EventEmitter();\n\n    constructor(element: ElementRef, zone: NgZone) {\n        this.element = element;\n        this.zone = zone;\n    }\n\n    private routeEvent: EventHandlerNonNull = (e: CustomEvent) => {\n        const emitter = this[e.type.split(':')[1]];\n        if (!emitter) return;\n        emitter.emit(e.detail);\n    };\n\n    protected initEditor(element: HTMLElement, props: any): PinturaEditor {\n        return undefined;\n    }\n\n    ngAfterViewInit(): void {\n        this.element.nativeElement.classList.add('PinturaRootWrapper');\n        // will block angular from listening to events inside the editor\n        this.zone.runOutsideAngular(() => {\n            this.editor = this.initEditor(\n                this.element.nativeElement,\n                Object.assign({}, this.options, { src: this.src })\n            );\n            this.unsubs = dispatchEditorEvents(this.editor, this.element.nativeElement);\n        });\n\n        // route events\n        Object.keys(this)\n            .filter((key) => this[key] instanceof EventEmitter)\n            .forEach((key) => {\n                this.element.nativeElement.addEventListener(`pintura:${key}`, this.routeEvent);\n            });\n    }\n\n    ngOnChanges() {\n        if (!this.editor) return;\n        Object.assign(this.editor, this.options, { src: this.src });\n    }\n\n    ngOnDestroy() {\n        if (!this.editor) return;\n\n        this.editor.destroy();\n\n        // unsubscribe\n        this.unsubs.forEach((unsub) => unsub());\n        this.unsubs = [];\n\n        // unroute events\n        Object.keys(this)\n            .filter((key) => this[key] instanceof EventEmitter)\n            .forEach((key) => {\n                this.element.nativeElement.removeEventListener(`pintura:${key}`, this.routeEvent);\n            });\n\n        this.editor = undefined;\n    }\n\n    ngOnInit(): void {}\n}\n","import { Component, OnInit } from '@angular/core';\n// @ts-ignore\nimport { appendEditor } from 'pintura';\nimport { PinturaEditorAbstractComponent } from './pintura-editor-abstract.component';\n\n@Component({\n    selector: 'pintura-editor',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class PinturaEditorComponent extends PinturaEditorAbstractComponent implements OnInit {\n    initEditor(element: HTMLElement, props: any) {\n        return appendEditor(element, props);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { openEditor, PinturaEditorModal } from 'pintura';\nimport { PinturaEditorAbstractComponent } from './pintura-editor-abstract.component';\n\n@Component({\n    selector: 'pintura-editor-modal',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class PinturaEditorModalComponent extends PinturaEditorAbstractComponent implements OnInit {\n    initEditor(element: HTMLElement, props: any) {\n        return openEditor(props);\n    }\n\n    showEditor() {\n        (this.editor as PinturaEditorModal).show();\n    }\n\n    hideEditor() {\n        (this.editor as PinturaEditorModal).hide();\n    }\n\n    ngOnDestroy() {\n        if (!this.editor) return;\n        this.editor = undefined;\n    }\n}\n","import { Component, OnInit } from '@angular/core';\n// @ts-ignore\nimport { overlayEditor } from 'pintura';\nimport { PinturaEditorAbstractComponent } from './pintura-editor-abstract.component';\n\n@Component({\n    selector: 'pintura-editor-overlay',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class PinturaEditorOverlayComponent\n    extends PinturaEditorAbstractComponent\n    implements OnInit {\n    initEditor(element: HTMLElement, props: any) {\n        return overlayEditor(element, props);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { PinturaEditorComponent } from './pintura-editor.component';\nimport { PinturaEditorModalComponent } from './pintura-editor-modal.component';\nimport { PinturaEditorOverlayComponent } from './pintura-editor-overlay.component';\n\n@NgModule({\n    declarations: [\n        PinturaEditorComponent,\n        PinturaEditorModalComponent,\n        PinturaEditorOverlayComponent,\n    ],\n    imports: [],\n    exports: [PinturaEditorComponent, PinturaEditorModalComponent, PinturaEditorOverlayComponent],\n})\nexport class AngularPinturaModule {}\n","/*\n * Public API Surface of angular-pintura\n */\n\nexport * from './lib/pintura-editor.component';\nexport * from './lib/pintura-editor-modal.component';\nexport * from './lib/pintura-editor-overlay.component';\nexport * from './lib/angular-pintura.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {PinturaEditorAbstractComponent as Éµa} from './lib/pintura-editor-abstract.component';"],"names":[],"mappings":"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"}